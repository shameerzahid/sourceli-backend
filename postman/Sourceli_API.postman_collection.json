{
	"info": {
		"_postman_id": "sourceli-api-v1",
		"name": "Sourceli API - Milestone 1 & 2",
		"description": "Postman collection for Sourceli B2B Fresh Produce Marketplace API\n\nBase URL: http://localhost:3001\n\nThis collection includes all endpoints for Milestone 1 and Milestone 2.\n\n**Milestone 1:**\n- Authentication & Authorization\n- User Registration (Farmer/Buyer)\n- Admin Panel (User Management)\n\n**Milestone 2:**\n- Farmer Availability Submission\n- Buyer Order Placement\n- Admin Allocation System\n- Payment Tracking\n- Delivery Assignments\n\n**Important:**\n- Farmer registration requires multipart/form-data with photos\n- Buyer registration uses JSON\n- Cloudinary must be configured for photo uploads\n- All protected endpoints require Bearer token in Authorization header",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health Check",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/health",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"health"
					]
				},
				"description": "Check if the API server is running"
			},
			"response": []
		},
		{
			"name": "API Info",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api"
					]
				},
				"description": "Get API information and available endpoints"
			},
			"response": []
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register Farmer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.environment.set(\"farmerUserId\", response.data.userId);",
									"    pm.environment.set(\"farmerApplicationId\", response.data.applicationId);",
									"    console.log(`Photos uploaded: ${response.data.photosUploaded || 0}`);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "email",
									"value": "farmer@example.com",
									"type": "text"
								},
								{
									"key": "phone",
									"value": "+1234567890",
									"type": "text"
								},
								{
									"key": "password",
									"value": "SecurePass123!",
									"type": "text"
								},
								{
									"key": "fullName",
									"value": "John Farmer",
									"type": "text"
								},
								{
									"key": "farmName",
									"value": "Green Valley Farm",
									"type": "text"
								},
								{
									"key": "region",
									"value": "North Region",
									"type": "text"
								},
								{
									"key": "town",
									"value": "Farmville",
									"type": "text"
								},
								{
									"key": "weeklyCapacityMin",
									"value": "50",
									"type": "text"
								},
								{
									"key": "weeklyCapacityMax",
									"value": "200",
									"type": "text"
								},
								{
									"key": "produceCategory",
									"value": "Rabbit",
									"type": "text"
								},
								{
									"key": "feedingMethod",
									"value": "Organic",
									"type": "text"
								},
								{
									"key": "termsAccepted",
									"value": "true",
									"type": "text",
									"description": "Must be true - agreement to platform rules, performance-based access, and no price negotiation policy"
								},
								{
									"key": "photos",
									"type": "file",
									"src": [],
									"description": "Upload farm photos (housing, animals, produce). Minimum 1 photo required, maximum 10. Formats: JPEG, PNG, WebP. Max size: 5MB per image."
								},
								{
									"key": "photos",
									"type": "file",
									"src": [],
									"description": "Additional photo (optional)"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register/farmer",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register",
								"farmer"
							]
						},
						"description": "Register a new farmer with farm photos.\n\n**Required:**\n- All form fields\n- termsAccepted must be true (platform rules agreement)\n- At least 1 farm photo (up to 10 photos)\n\n**Photo Requirements:**\n- Formats: JPEG, JPG, PNG, WebP\n- Max size: 5MB per image\n- Max count: 10 images\n- Photos should show: farm, housing, animals, and/or produce\n\n**Platform Rules Agreement:**\n- Farmer must agree to: platform rules, performance-based access, and no price negotiation policy\n- Set termsAccepted to \"true\"\n\n**Note:** Creates user with status APPLIED, requires admin approval. Photos are uploaded to Cloudinary."
					},
					"response": []
				},
				{
					"name": "Register Buyer",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.environment.set(\"buyerUserId\", response.data.userId);",
									"    pm.environment.set(\"buyerRegistrationId\", response.data.registrationId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"buyer@restaurant.com\",\n  \"phone\": \"+1987654321\",\n  \"password\": \"SecurePass123!\",\n  \"fullName\": \"Restaurant Owner\",\n  \"businessName\": \"Fine Dining Restaurant\",\n  \"buyerType\": \"RESTAURANT\",\n  \"contactPerson\": \"John Manager\",\n  \"estimatedVolume\": 100,\n  \"deliveryAddresses\": [\n    {\n      \"address\": \"123 Main Street, City, State 12345\",\n      \"landmark\": \"Near Central Park\",\n      \"isDefault\": true\n    }\n  ]\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register/buyer",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"register",
								"buyer"
							]
						},
						"description": "Register a new buyer. Creates user with status PENDING, requires admin approval."
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set(\"accessToken\", response.data.accessToken);",
									"    pm.environment.set(\"refreshToken\", response.data.refreshToken);",
									"    pm.environment.set(\"userId\", response.data.user.id);",
									"    pm.environment.set(\"userRole\", response.data.user.role);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"emailOrPhone\": \"farmer@example.com\",\n  \"password\": \"SecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login with email or phone number and password. Returns access token and refresh token."
					},
					"response": []
				},
				{
					"name": "Get Current User Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"me"
							]
						},
						"description": "Get current authenticated user's profile with role-specific data."
					},
					"response": []
				},
				{
					"name": "Refresh Access Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set(\"accessToken\", response.data.accessToken);",
									"    pm.environment.set(\"refreshToken\", response.data.refreshToken);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"refresh"
							]
						},
						"description": "Refresh access token using refresh token. Returns new access and refresh tokens."
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"logout"
							]
						},
						"description": "Logout current user. In MVP, this is handled client-side by removing tokens."
					},
					"response": []
				},
				{
					"name": "Forgot Password",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200 && pm.environment.get(\"NODE_ENV\") === \"development\") {",
									"    const response = pm.response.json();",
									"    if (response.resetToken) {",
									"        pm.environment.set(\"resetToken\", response.resetToken);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"emailOrPhone\": \"farmer@example.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/forgot-password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"forgot-password"
							]
						},
						"description": "Request password reset. In development mode, returns reset token. In production, sends token via email/SMS."
					},
					"response": []
				},
				{
					"name": "Verify Reset Token",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/verify-reset-token/{{resetToken}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"verify-reset-token",
								"{{resetToken}}"
							]
						},
						"description": "Verify if password reset token is valid before showing reset form."
					},
					"response": []
				},
				{
					"name": "Reset Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{resetToken}}\",\n  \"newPassword\": \"NewSecurePass123!\",\n  \"confirmPassword\": \"NewSecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/reset-password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"reset-password"
							]
						},
						"description": "Reset password using reset token."
					},
					"response": []
				},
				{
					"name": "Change Password",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"currentPassword\": \"SecurePass123!\",\n  \"newPassword\": \"NewSecurePass123!\",\n  \"confirmPassword\": \"NewSecurePass123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/change-password",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"auth",
								"change-password"
							]
						},
						"description": "Change password for authenticated users. Requires current password."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for user registration, login, and password management"
		},
		{
			"name": "Admin",
			"item": [
				{
					"name": "Dashboard Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/admin/stats",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"admin",
								"stats"
							]
						},
						"description": "Get admin dashboard statistics: pending applications, pending registrations, active farmers, active buyers."
					},
					"response": []
				},
				{
					"name": "Farmer Applications",
					"item": [
						{
							"name": "Get Pending Farmer Applications",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/farmers/applications",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"farmers",
										"applications"
									]
								},
								"description": "Get all pending farmer applications. Requires admin role."
							},
							"response": []
						},
						{
							"name": "Get Farmer Application by ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/farmers/applications/{{farmerApplicationId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"farmers",
										"applications",
										"{{farmerApplicationId}}"
									]
								},
								"description": "Get a specific farmer application by ID with full details including photos."
							},
							"response": []
						},
						{
							"name": "Approve Farmer Application",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    console.log('Farmer application approved successfully');",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"adminNotes\": \"Application approved after review. Farm looks good.\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/farmers/applications/{{farmerApplicationId}}/approve",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"farmers",
										"applications",
										"{{farmerApplicationId}}",
										"approve"
									]
								},
								"description": "Approve a farmer application. Sets user status to PROBATIONARY and records verification info."
							},
							"response": []
						},
						{
							"name": "Reject Farmer Application",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    console.log('Farmer application rejected');",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"rejectionReason\": \"Farm does not meet quality standards. Please improve facilities and reapply.\",\n  \"adminNotes\": \"Photos show inadequate housing conditions.\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/farmers/applications/{{farmerApplicationId}}/reject",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"farmers",
										"applications",
										"{{farmerApplicationId}}",
										"reject"
									]
								},
								"description": "Reject a farmer application. Sets user status to BLOCKED and records rejection reason."
							},
							"response": []
						}
					],
					"description": "Manage farmer applications - view, approve, and reject"
				},
				{
					"name": "Buyer Registrations",
					"item": [
						{
							"name": "Get Pending Buyer Registrations",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/buyers/registrations",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"buyers",
										"registrations"
									]
								},
								"description": "Get all pending buyer registrations. Requires admin role."
							},
							"response": []
						},
						{
							"name": "Get Buyer Registration by ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/buyers/registrations/{{buyerRegistrationId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"buyers",
										"registrations",
										"{{buyerRegistrationId}}"
									]
								},
								"description": "Get a specific buyer registration by ID with full details including delivery addresses."
							},
							"response": []
						},
						{
							"name": "Approve Buyer Registration",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    console.log('Buyer registration approved successfully');",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"adminNotes\": \"Registration approved. Business verified.\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/buyers/registrations/{{buyerRegistrationId}}/approve",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"buyers",
										"registrations",
										"{{buyerRegistrationId}}",
										"approve"
									]
								},
								"description": "Approve a buyer registration. Sets user status to ACTIVE and records verification info."
							},
							"response": []
						},
						{
							"name": "Reject Buyer Registration",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    console.log('Buyer registration rejected');",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"rejectionReason\": \"Business verification failed. Please provide valid business documents.\",\n  \"adminNotes\": \"Unable to verify business registration.\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/buyers/registrations/{{buyerRegistrationId}}/reject",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"buyers",
										"registrations",
										"{{buyerRegistrationId}}",
										"reject"
									]
								},
								"description": "Reject a buyer registration. Sets user status to BLOCKED and records rejection reason."
							},
							"response": []
						}
					],
					"description": "Manage buyer registrations - view, approve, and reject"
				},
				{
					"name": "User Management",
					"item": [
						{
							"name": "Get All Farmers",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/farmers?status=ACTIVE&region=North Region",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"farmers"
									],
									"query": [
										{
											"key": "status",
											"value": "ACTIVE",
											"description": "Filter by status: ACTIVE, PROBATIONARY, APPLIED, SUSPENDED, BLOCKED"
										},
										{
											"key": "region",
											"value": "North Region",
											"description": "Filter by region"
										},
										{
											"key": "produceCategory",
											"value": "Rabbit",
											"description": "Filter by produce category",
											"disabled": true
										}
									]
								},
								"description": "Get all farmers with optional filters (status, region, produceCategory)."
							},
							"response": []
						},
						{
							"name": "Update Farmer Status",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"status\": \"ACTIVE\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/farmers/{{farmerId}}/status",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"farmers",
										"{{farmerId}}",
										"status"
									]
								},
								"description": "Update farmer status. Valid statuses: ACTIVE, PROBATIONARY, SUSPENDED, BLOCKED."
							},
							"response": []
						},
						{
							"name": "Get All Buyers",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/buyers?status=ACTIVE&buyerType=RESTAURANT",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"buyers"
									],
									"query": [
										{
											"key": "status",
											"value": "ACTIVE",
											"description": "Filter by status: ACTIVE, PENDING, SUSPENDED, BLOCKED"
										},
										{
											"key": "buyerType",
											"value": "RESTAURANT",
											"description": "Filter by buyer type: RESTAURANT, HOTEL, CATERER, INDIVIDUAL"
										}
									]
								},
								"description": "Get all buyers with optional filters (status, buyerType)."
							},
							"response": []
						},
						{
							"name": "Update Buyer Status",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"status\": \"SUSPENDED\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/buyers/{{buyerId}}/status",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"buyers",
										"{{buyerId}}",
										"status"
									]
								},
								"description": "Update buyer status. Valid statuses: ACTIVE, PENDING, SUSPENDED, BLOCKED."
							},
							"response": []
						}
					],
					"description": "Manage all farmers and buyers - view lists and update statuses"
				}
			],
			"description": "Admin endpoints for managing farmer applications, buyer registrations, and user management. All endpoints require admin authentication."
		},
		{
			"name": "System",
			"item": [
				{
					"name": "Get Produce Categories",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/system/produce-categories",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"system",
								"produce-categories"
							]
						},
						"description": "Get all produce categories (public endpoint, no authentication required). Used for order forms and availability submissions."
					},
					"response": []
				}
			],
			"description": "System endpoints - public endpoints that don't require authentication"
		},
		{
			"name": "Farmer",
			"item": [
				{
					"name": "Availability",
					"item": [
						{
							"name": "Submit Weekly Availability",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"productType\": \"Rabbit\",\n  \"quantityAvailable\": 50,\n  \"avgWeight\": 2.5,\n  \"readyDate\": \"2024-01-25T00:00:00.000Z\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/farmers/availability",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"farmers",
										"availability"
									]
								},
								"description": "Submit weekly availability. Submission window: Monday-Tuesday. Late submissions are automatically marked."
							},
							"response": []
						},
						{
							"name": "Get Availability History",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/farmers/availability?limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"farmers",
										"availability"
									],
									"query": [
										{
											"key": "limit",
											"value": "20",
											"description": "Limit number of results (default: 20)"
										}
									]
								},
								"description": "Get availability history with current week status. Includes submission window information."
							},
							"response": []
						}
					],
					"description": "Farmer availability management - submit and view weekly availability"
				},
				{
					"name": "Delivery Assignments",
					"item": [
						{
							"name": "Get All Delivery Assignments",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/farmers/deliveries?status=PENDING&upcomingOnly=true",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"farmers",
										"deliveries"
									],
									"query": [
										{
											"key": "status",
											"value": "PENDING",
											"description": "Filter by status: PENDING, DELIVERED, FAILED",
											"disabled": true
										},
										{
											"key": "upcomingOnly",
											"value": "true",
											"description": "Show only upcoming deliveries",
											"disabled": true
										}
									]
								},
								"description": "Get all delivery assignments for the authenticated farmer. Ordered chronologically by delivery date."
							},
							"response": []
						},
						{
							"name": "Get Delivery Assignment by ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/farmers/deliveries/{{assignmentId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"farmers",
										"deliveries",
										"{{assignmentId}}"
									]
								},
								"description": "Get specific delivery assignment details. Buyer contact info is anonymized."
							},
							"response": []
						}
					],
					"description": "View delivery assignments - read-only access to assigned deliveries"
				},
				{
					"name": "Payments",
					"item": [
						{
							"name": "Get Payment History",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/farmers/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"farmers",
										"payments"
									]
								},
								"description": "Get payment history (read-only). Includes payment records and outstanding balance."
							},
							"response": []
						},
						{
							"name": "Get Outstanding Balance",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/farmers/payments/balance",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"farmers",
										"payments",
										"balance"
									]
								},
								"description": "Get outstanding balance summary (total owed, total paid, outstanding balance)."
							},
							"response": []
						}
					],
					"description": "Payment tracking - view payment history and outstanding balance (read-only)"
				}
			],
			"description": "Farmer endpoints - requires farmer authentication and role"
		},
		{
			"name": "Buyer",
			"item": [
				{
					"name": "Delivery Addresses",
					"item": [
						{
							"name": "Get All Delivery Addresses",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/buyers/delivery-addresses",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"delivery-addresses"
									]
								},
								"description": "Get all delivery addresses for the authenticated buyer. Default address is listed first."
							},
							"response": []
						},
						{
							"name": "Create Delivery Address",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"address\": \"456 Business Street, City, State 54321\",\n  \"landmark\": \"Behind Main Mall\",\n  \"isDefault\": false\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/buyers/delivery-addresses",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"delivery-addresses"
									]
								},
								"description": "Create a new delivery address. If set as default, other addresses are unset as default."
							},
							"response": []
						},
						{
							"name": "Update Delivery Address",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"address\": \"456 Business Street, Updated Address\",\n  \"landmark\": \"Near New Mall\",\n  \"isDefault\": true\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/buyers/delivery-addresses/{{deliveryAddressId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"delivery-addresses",
										"{{deliveryAddressId}}"
									]
								},
								"description": "Update a delivery address. Can update address, landmark, or set as default."
							},
							"response": []
						},
						{
							"name": "Delete Delivery Address",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/buyers/delivery-addresses/{{deliveryAddressId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"delivery-addresses",
										"{{deliveryAddressId}}"
									]
								},
								"description": "Delete a delivery address. Cannot delete if address is used in existing orders."
							},
							"response": []
						}
					],
					"description": "Manage delivery addresses - CRUD operations"
				},
				{
					"name": "Orders",
					"item": [
						{
							"name": "Create Order",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const response = pm.response.json();",
											"    pm.environment.set(\"orderId\", response.data.id);",
											"    console.log(`Order created: ${response.data.id}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"productType\": \"Rabbit\",\n  \"quantity\": 25,\n  \"orderType\": \"ONE_TIME\",\n  \"deliveryDate\": \"2024-01-30T00:00:00.000Z\",\n  \"deliveryAddressId\": \"{{deliveryAddressId}}\",\n  \"notes\": \"Please deliver in the morning if possible\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/buyers/orders",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"orders"
									]
								},
								"description": "Create a one-time order. Order status starts as PENDING, requires admin approval."
							},
							"response": []
						},
						{
							"name": "Get All Orders",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/buyers/orders?status=PENDING&limit=50",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"orders"
									],
									"query": [
										{
											"key": "status",
											"value": "PENDING",
											"description": "Filter by status: PENDING, APPROVED, ALLOCATION, DELIVERED, FAILED, REJECTED",
											"disabled": true
										},
										{
											"key": "limit",
											"value": "50",
											"description": "Limit number of results (default: 50)",
											"disabled": true
										}
									]
								},
								"description": "Get all orders for the authenticated buyer. Includes order history with status."
							},
							"response": []
						},
						{
							"name": "Get Order by ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/buyers/orders/{{orderId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"buyers",
										"orders",
										"{{orderId}}"
									]
								},
								"description": "Get specific order details including delivery assignments and status."
							},
							"response": []
						}
					],
					"description": "Order management - create and view orders"
				}
			],
			"description": "Buyer endpoints - requires buyer authentication and role"
		},
		{
			"name": "Admin - Milestone 2",
			"item": [
				{
					"name": "Order Management",
					"item": [
						{
							"name": "Get Pending Orders",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/orders/pending",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"orders",
										"pending"
									]
								},
								"description": "Get all pending orders awaiting admin review. Ordered by creation date (oldest first)."
							},
							"response": []
						},
						{
							"name": "Approve Order",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    const response = pm.response.json();",
											"    pm.environment.set(\"approvedOrderId\", response.data.id);",
											"    console.log(`Order approved: ${response.data.id}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"adminNotes\": \"Order approved. Ready for allocation.\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/orders/{{orderId}}/approve",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"orders",
										"{{orderId}}",
										"approve"
									]
								},
								"description": "Approve an order. Changes status from PENDING to ALLOCATION. Order becomes available for allocation."
							},
							"response": []
						},
						{
							"name": "Reject Order",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"rejectionReason\": \"Order quantity exceeds available supply. Please reduce quantity and resubmit.\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/orders/{{orderId}}/reject",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"orders",
										"{{orderId}}",
										"reject"
									]
								},
								"description": "Reject an order. Changes status to REJECTED. Requires rejection reason."
							},
							"response": []
						}
					],
					"description": "Order review and approval - review pending orders and approve/reject"
				},
				{
					"name": "Allocation",
					"item": [
						{
							"name": "Get Allocation Data",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/allocations",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"allocations"
									]
								},
								"description": "Get allocation screen data: pending orders (status: ALLOCATION) and available farmers with their current week availability."
							},
							"response": []
						},
						{
							"name": "Create Delivery Assignments",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const response = pm.response.json();",
											"    console.log(`Assignments created: ${response.data.assignments.length}`);",
											"    console.log(`Total assigned: ${response.data.totalAssigned}`);",
											"    console.log(`Remaining: ${response.data.remainingQuantity}`);",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"orderId\": \"{{approvedOrderId}}\",\n  \"assignments\": [\n    {\n      \"farmerId\": \"{{farmerId}}\",\n      \"assignedQuantity\": 15\n    },\n    {\n      \"farmerId\": \"{{farmerId2}}\",\n      \"assignedQuantity\": 10\n    }\n  ]\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/allocations",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"allocations"
									]
								},
								"description": "Create delivery assignments for an order. Can assign multiple farmers to a single order. Total assigned quantity must not exceed order quantity."
							},
							"response": []
						},
						{
							"name": "Update Assignment",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"assignedQuantity\": 20\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/allocations/{{assignmentId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"allocations",
										"{{assignmentId}}"
									]
								},
								"description": "Update assignment quantity. Can only update if status is PENDING. Validates total doesn't exceed order quantity."
							},
							"response": []
						},
						{
							"name": "Delete Assignment",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/allocations/{{assignmentId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"allocations",
										"{{assignmentId}}"
									]
								},
								"description": "Delete an assignment. Can only delete if status is PENDING."
							},
							"response": []
						}
					],
					"description": "Manual allocation system - allocate farmer supply to orders"
				},
				{
					"name": "Payment Tracking",
					"item": [
						{
							"name": "Record Offline Payment",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"farmerId\": \"{{farmerId}}\",\n  \"deliveryAssignmentId\": \"{{assignmentId}}\",\n  \"amountPaid\": 1500.00,\n  \"paymentMethod\": \"BANK_TRANSFER\",\n  \"paymentDate\": \"2024-01-20T00:00:00.000Z\",\n  \"notes\": \"Payment received via bank transfer. Reference: TXN123456\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/admin/payments",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"payments"
									]
								},
								"description": "Record an offline payment received from a farmer. Payment methods: BANK_TRANSFER, MOBILE_MONEY, CASH, OTHER."
							},
							"response": []
						},
						{
							"name": "Get Payment Reports",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{accessToken}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/api/admin/payments?farmerId={{farmerId}}&paymentStatus=PAID&startDate=2024-01-01&endDate=2024-01-31",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"admin",
										"payments"
									],
									"query": [
										{
											"key": "farmerId",
											"value": "{{farmerId}}",
											"description": "Filter by farmer ID",
											"disabled": true
										},
										{
											"key": "paymentStatus",
											"value": "PAID",
											"description": "Filter by status: NOT_PAID, PARTIALLY_PAID, PAID",
											"disabled": true
										},
										{
											"key": "startDate",
											"value": "2024-01-01",
											"description": "Filter by start date (ISO format)",
											"disabled": true
										},
										{
											"key": "endDate",
											"value": "2024-01-31",
											"description": "Filter by end date (ISO format)",
											"disabled": true
										}
									]
								},
								"description": "Get payment reports with optional filters. Returns payments and summary statistics."
							},
							"response": []
						}
					],
					"description": "Payment tracking - record offline payments and generate reports"
				}
			],
			"description": "Admin endpoints for Milestone 2 - order management, allocation, and payment tracking"
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3001",
			"type": "string"
		}
	]
}

